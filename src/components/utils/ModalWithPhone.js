import React, { Component } from "react";
import ModalWindow from "./ModalWindow";
import { connect } from "react-redux";
import { Field, reduxForm } from "redux-form";
import { createTextMask } from "redux-form-input-masks";
import { closeDataAgreement, closeModalWithPhone, openDataAgreement } from "../../actionCreators/modalActions";
import MySubmitButton from "./MySubmitButton";
import { sendFormDataEmail } from "../../actionCreators/mailActions";
import MySpinner from "./MySpinner";
import { withRouter } from "react-router-dom";


class ModalWithPhone extends Component {

	RENDER_SCENARIO = window.app && window.app.env.INITIAL_RENDER_SCENARIO;

	UNSAFE_componentWillReceiveProps(nextProps) {
		if (nextProps.mail.sendFormDataStatus === "SUCCESS") {
			setTimeout(() => {
				this.props.closeModalWithPhone();
				this.props.history.push("/final");
			}, 1500);
		}
	}

	handleModalClose = () => {
		this.props.closeModalWithPhone();
		// this.props.destroy("modalWithPhone");
	};

	onAgreementCloseClick = () => {
		if (this.RENDER_SCENARIO === "THIRD") {
			this.props.closeModalWithPhone().then(nextState => {
				this.props.closeDataAgreement("modalWithPhone");
			});
		} else {
			this.props.closeDataAgreement("modalWithPhone");
		}
	};

	onAgreementLinkClick = () => {
		this.props.openDataAgreement("modalWithPhone");
		// this.props.destroy("modalWithPhone");
	};

	handleFormSubmit = (data) => {
		this.props.sendFormDataEmail();
	};

	renderField = ({
									 input,
									 placeholder,
									 type,
									 meta: { touched, error }
								 }) => (
		<React.Fragment>
			<input {...input} placeholder={placeholder} type={type} />
			{touched &&
			(error && <div className='form-error'>{error}</div>)}
		</React.Fragment>
	);

	renderModalWithPhone = () => {
		const { handleSubmit, submitting, valid } = this.props;

		const phoneMask = createTextMask({
			pattern: "+7 (999) 999-99-99",
			guide: true
		});

		return (
			<div className="modal-with-phone">
				<div className="modal-with-phone__header-box">

					<div className="modal-with-phone__header">
						–ö–ü–ö ‚Äú–ú—É—Ä–∞–≤–µ–π‚Äù
					</div>

					<div className="modal-with-phone__text">
						<p>–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã –æ—Ç–≤–µ—á–∞—é—Ç –≤ —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è –≤ —Ç–µ—á–µ–Ω–∏–∏ 1 –º–∏–Ω—É—Ç—ã.</p>
						<p>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∏ –Ω–∞–∂–º–∏—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å.</p>
					</div>

				</div>

				<div className="modal-with-phone__form-box">
					<div className="form-box__header">
						–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è
					</div>

					{this.props.mail.sendFormDataStatus === "" ? (
						<form noValidate onSubmit={handleSubmit(this.handleFormSubmit)}>
							<Field name='name' component={this.renderField} type='text' placeholder="–í–∞—à–µ –∏–º—è" />
							<Field name='phone' component={this.renderField} type='tel'
										 placeholder="–í–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞" {...phoneMask} />
							<MySubmitButton text="–û—Ç–ø—Ä–∞–≤–∏—Ç—å" isEnabled={(!submitting) && valid} />
						</form>
					) : null}

					{this.props.mail.sendFormDataStatus === "PENDING" ? (
						<MySpinner isActive={true} />
					) : null}

					{this.props.mail.sendFormDataStatus === "SUCCESS" ? (
						<div className="form-send-success">
							–ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!
						</div>
					) : null}

					{this.props.mail.sendFormDataStatus === "FAIL" ? (
						<div className="form-send-fail">
							–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö!
						</div>
					) : null}


					<div className="modal-with-phone__personal-data-link">
						–ù–∞–∂–∏–º–∞—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å, –í—ã –¥–∞–µ—Ç–µ <span className='personal-data-link'
																							onClick={() => this.onAgreementLinkClick()}> —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞
								–æ–±—Ä–∞–±–æ—Ç–∫—É —Å–≤–æ–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</span>
					</div>
				</div>
			</div>
		);
	};


	renderDataAgreement = () => {
		return (
			<div className="modal-with-phone-agreement">
				<div className="modal-with-phone-agreement__header-box">
					<div className="modal-with-phone-agreement__header">
						–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ
					</div>

					<div className="modal-with-phone-agreement__header-text">
						<div onClick={() => this.onAgreementCloseClick()}>ü°® &nbsp;–ù–∞–∑–∞–¥ –∫ —Ñ–æ—Ä–º–µ</div>
					</div>
				</div>

				<div className="modal-with-phone-agreement-body">
					<p>
						–ù–∞—Å—Ç–æ—è—â–∏–º —è, –¥–∞–ª–µ–µ ‚Äì ¬´–ü–æ—Å–µ—Ç–∏—Ç–µ–ª—å–°–∞–π—Ç–∞¬ª, –≤–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –§–µ–¥–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∑–∞–∫–æ–Ω–∞ –æ—Ç 27.07.2006 –≥. ‚Ññ
						152-–§–ó ¬´–û –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö¬ª (—Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –∏ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è–º–∏)—Å–≤–æ–±–æ–¥–Ω–æ, —Å–≤–æ–µ–π –≤–æ–ª–µ–π –∏ –≤ —Å–≤–æ–µ–º –∏–Ω—Ç–µ—Ä–µ—Å–µ –¥–∞—é
						—Å–≤–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ –ö–ü–ö "–ú–£–†–ê–í–ï–ô" (–¥–∞–ª–µ–µ ‚Äì ¬´–ö–ü–ö¬ª) –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–≤–æ–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –ø—Ä–∏
						—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—É—Ç–µ–º –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –≤–µ–±-—Ñ–æ—Ä–º—ã –Ω–∞ —Å–∞–π—Ç–µ –ö–ü–ö –º–∞—Ç–∫–∞–ø–∏—Ç–∞–ª.—Ä—Ñ.
					</p>
					<p>
						–ü–æ–¥ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —è –ø–æ–Ω–∏–º–∞—é –ª—é–±—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –æ—Ç–Ω–æ—Å—è—â—É—é—Å—è –∫–æ –º–Ω–µ –∫–∞–∫ –∫ –ü–æ—Å–µ—Ç–∏—Ç–µ–ª—é —Å–∞–π—Ç–∞, –≤ —Ç–æ–º —á–∏—Å–ª–µ
						–º–æ–∏ —Ñ–∞–º–∏–ª–∏—é, –∏–º—è, –æ—Ç—á–µ—Å—Ç–≤–æ, –∞–¥—Ä–µ—Å, –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ—Ñ–µ—Å—Å–∏—é, –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ(—Ç–µ–ª–µ—Ñ–æ–Ω, —Ñ–∞–∫—Å, —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è
						–ø–æ—á—Ç–∞, –ø–æ—á—Ç–æ–≤—ã–π –∞–¥—Ä–µ—Å), —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏, –∏–Ω—É—é –¥—Ä—É–≥—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –ü–æ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —è –ø–æ–Ω–∏–º–∞—é
						—Å–±–æ—Ä, —Å–∏—Å—Ç–µ–º–∞—Ç–∏–∑–∞—Ü–∏—é, –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ, —É—Ç–æ—á–Ω–µ–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ, —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ,
						–ø–µ—Ä–µ–¥–∞—á—É, –≤ —Ç–æ–º —á–∏—Å–ª–µ —Ç—Ä–∞–Ω—Å–≥—Ä–∞–Ω–∏—á–Ω—É—é, –æ–±–µ–∑–ª–∏—á–∏–≤–∞–Ω–∏–µ, –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ, –±–µ—Å—Å—Ä–æ—á–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ), –∏
						–ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ –¥–µ–π—Å—Ç–≤–∏—è(–æ–ø–µ—Ä–∞—Ü–∏–∏) —Å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.
					</p>
					<p>
						–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ü–æ—Å–µ—Ç–∏—Ç–µ–ª—è–°–∞–π—Ç–∞ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤ —Ü–µ–ª—è—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
						–ü–æ—Å–µ—Ç–∏—Ç–µ–ª—è–°–∞–π—Ç–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ö–ü–ö —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ü–æ—Å–µ—Ç–∏—Ç–µ–ª—é–°–∞–π—Ç–∞ –ø–æ—á—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏
						—Å–º—Å-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, –≤ —Ç–æ–º —á–∏—Å–ª–µ —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è, –æ—Ç –ö–ü–ö, –µ–≥–æ –∞—Ñ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ª–∏—Ü –∏/–∏–ª–∏ —Å—É–±–ø–æ–¥—Ä—è–¥—á–∏–∫–æ–≤,
						–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –∏ –Ω–æ–≤–æ—Å—Ç–Ω—ã—Ö —Ä–∞—Å—Å—ã–ª–æ–∫, –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –ö–ü–ö –∏ –¥—Ä—É–≥–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Ä–µ–∫–ª–∞–º–Ω–æ-–Ω–æ–≤–æ—Å—Ç–Ω–æ–≥–æ
						—Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ —Å—Ü–µ–ª—å—é –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ª–∏—á–Ω–æ—Å—Ç–∏ –ü–æ—Å–µ—Ç–∏—Ç–µ–ª—è–°–∞–π—Ç–∞ –ø—Ä–∏ –ø–æ—Å–µ—â–µ–Ω–∏–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –ö–ü–ö.
					</p>
					<p>
						–î–∞—Ç–æ–π –≤—ã–¥–∞—á–∏ —Å–æ–≥–ª–∞—Å–∏—è –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ü–æ—Å–µ—Ç–∏—Ç–µ–ª—è–°–∞–π—Ç–∞ —è–≤–ª—è–µ—Ç—Å—è –¥–∞—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π
						–≤–µ–±-—Ñ–æ—Ä–º—ã —Å –°–∞–π—Ç–∞ –ö–ü–ö.
					</p>
					<p>
						–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ü–æ—Å–µ—Ç–∏—Ç–µ–ª—è–°–∞–π—Ç–∞ –º–æ–∂–µ—Ç –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å—Å—è —Å –ø–æ–º–æ—â—å—é —Å—Ä–µ–¥—Å—Ç–≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏/–∏–ª–∏–±–µ–∑
						–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –¥–µ–π—Å—Ç–≤—É—é—â–∏–º –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –†–§ –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º–∏
						–ø–æ–ª–æ–∂–µ–Ω–∏—è–º–∏ –ö–ü–ö.
					</p>
					<p>
						–ö–ü–ö –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–æ–≤—ã–µ, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ä—ã –∏–ª–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∏—Ö –ø—Ä–∏–Ω—è—Ç–∏–µ –¥–ª—è
						–∑–∞—â–∏—Ç—ã –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ—Ç –Ω–µ–ø—Ä–∞–≤–æ–º–µ—Ä–Ω–æ–≥–æ –∏–ª–∏ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–∏–º, —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—è, –∏–∑–º–µ–Ω–µ–Ω–∏—è,
						–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è, —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∞ —Ç–∞–∫–∂–µ –æ—Ç –∏–Ω—ã—Ö
						–Ω–µ–ø—Ä–∞–≤–æ–º–µ—Ä–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –≤–æ—Ç–Ω–æ—à–µ–Ω–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∞ —Ç–∞–∫–∂–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ —Å–µ–±—è –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
						–∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ü–æ—Å–µ—Ç–∏—Ç–µ–ª—è–°–∞–π—Ç–∞. –ö–ü–ö –≤–ø—Ä–∞–≤–µ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç—å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö
						–¥–∞–Ω–Ω—ã—Ö –ü–æ—Å–µ—Ç–∏—Ç–µ–ª—è–°–∞–π—Ç–∞ —Å—É–±–ø–æ–¥—Ä—è–¥—á–∏–∫–æ–≤, –∞ —Ç–∞–∫–∂–µ –≤–ø—Ä–∞–≤–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–≤–æ–∏–º
						–∞—Ñ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ª–∏—Ü–∞–º, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–∏–Ω—è—Ç–∏–µ —Ç–∞–∫–∏–º–∏ —Å—É–±–ø–æ–¥—Ä—è–¥—á–∏–∫–∞–º–∏ –∏ –∞—Ñ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ª–∏—Ü–∞–º–∏
						—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤ –≤ —á–∞—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
					</p>
					<p>
						–Ø –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω(–∞), —á—Ç–æ:
					</p>
					<p>
						–Ω–∞—Å—Ç–æ—è—â–µ–µ —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –º–æ–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ –°–∞–π—Ç–µ –ö–ü–ö,
						–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö(–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º C–∞–π—Ç–∞, –¥–µ–π—Å—Ç–≤—É–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 20 (–¥–≤–∞–¥—Ü–∞—Ç–∏) –ª–µ—Ç —Å–º–æ–º–µ–Ω—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
						–Ω–∞ C–∞–π—Ç–µ –ö–ü–ö; <br />
						—Å–æ–≥–ª–∞—Å–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–æ–∑–≤–∞–Ω–æ –º–Ω–æ—é –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –ø–∏—Å—å–º–µ–Ω–Ω–æ–≥–æ –∑–∞—è–≤–ª–µ–Ω–∏—è –≤ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–π —Ñ–æ—Ä–º–µ;
						–ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Ç—Ä–µ—Ç—å–∏—Ö –ª–∏—Ü –±–µ–∑ –∏—Ö —Å–æ–≥–ª–∞—Å–∏—è –≤–ª–µ—á–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å
						–¥–µ–π—Å—Ç–≤—É—é—â–∏–º –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏.
					</p>
				</div>
			</div>
		);
	};

	render() {
		const { isEnabled, dataAgreementIsEnabled } = this.props.modals.modalWithPhone;

		return (
			isEnabled ? (
				<ModalWindow isOpen={isEnabled}
										 onModalClose={() => this.handleModalClose()}
										 container={document.getElementById("modal-with-phone")}>
					{dataAgreementIsEnabled ? this.renderDataAgreement() : this.renderModalWithPhone()}
				</ModalWindow>
			) : null
		);
	}
}

const mapStateToProps = (state) => ({
	modals: state.modals,
	form: state.form,
	mail: state.mail
});

const validate = values => {
	const errors = {};
	if (!values.name) {
		errors.name = "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è";
	} else if (values.name.length < 3) {
		errors.name = "–ò–º—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤.";
	}
	if (!values.phone) {
		errors.phone = "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞";
	} else if (values.phone.length < 10) {
		errors.phone = "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤–≤–æ–¥–∞";
	}
	return errors;
};

export default reduxForm({
	form: "modalWithPhone",
	shouldValidate: () => true,
	destroyOnUnmount: true,
	validate
})(withRouter(connect(mapStateToProps, {
	closeModalWithPhone,
	openDataAgreement,
	closeDataAgreement,
	sendFormDataEmail
})(ModalWithPhone)));